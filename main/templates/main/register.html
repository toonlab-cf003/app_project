{% extends 'main/base.html' %}

{% block title %}ニックネーム登録ページ{% endblock %}
{% block body_class %}page-register{% endblock %}

{% block content %}
<main class="main-content">
  <div class="register-container">
    <h2>プレイヤー登録</h2>
    <p>ニックネーム を 入力して、よびかた を えらんでね！</p>
    <form method="POST">
      {% csrf_token %}
      <div class="form-row">
        <input class="nickname-input" type="text" name="nickname" placeholder="例：ちょこ" maxlength="8" required>
        <select class="suffix-select" name="suffix" id="suffix" required>
          <option value="" disabled selected>選んでね</option>
          <option value="さん">さん</option>
          <option value="くん">くん</option>
          <option value="ちゃん">ちゃん</option>
          <option value="NONE">(なし)</option>
        </select>
      </div>
      <p><small>ひらがな と カタカナ だけで 入力してね<br>8もじ まで 入力できるよ</small></p>
      <input type="hidden" name="username" value="temp_user_{{ form.nickname.value|default:'new' }}">
      <input type="hidden" name="password1" value="temporary_password">
      <input type="hidden" name="password2" value="temporary_password">
      <button class="btn btn-wrong" id="next-btn" type="submit" disabled>つぎへ</button>
      <script>
        // 視覚的にも押せないように（なくても動くがUX向上）
        const sel = document.getElementById('suffix');
        const btn = document.getElementById('next-btn');
        const update = () => { btn.disabled = !sel.value; };
        update();
        sel.addEventListener('change', update);
      </script>
    </form>
  </div>
</main>
{% endblock %}
